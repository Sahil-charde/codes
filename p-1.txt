#include <stdio.h>
#include <string.h>

char undo[10][100], redo[10][100];
int topU = -1, topR = -1;
char text[200] = "";

void pushU(char s[]) {
    strcpy(undo[++topU], s);
}

void pushR(char s[]) {
    strcpy(redo[++topR], s);
}

void popU(char s[]) {
    strcpy(s, undo[topU--]);
}

void popR(char s[]) {
    strcpy(s, redo[topR--]);
}

int main() {
    int ch;
    char temp[100];

    while (1) {
        printf("\n1. Type Text");
        printf("\n2. Undo");
        printf("\n3. Redo");
        printf("\n4. Show Text");
        printf("\n5. Exit");
        printf("\nEnter choice: ");
        scanf("%d", &ch);
        getchar();

        if (ch == 1) {
            pushU(text);       // save old text before change
            printf("Enter text: ");
            fgets(temp, 100, stdin);
            temp[strcspn(temp, "\n")] = '\0';
            strcat(text, temp);
            topR = -1;        // redo clear
        }

        else if (ch == 2) {
            if (topU == -1) printf("Nothing to undo!\n");
            else {
                pushR(text);  // save current state to redo
                popU(text);   // restore old state
            }
        }

        else if (ch == 3) {
            if (topR == -1) printf("Nothing to redo!\n");
            else {
                pushU(text);  // current → undo
                popR(text);   // redo → current
            }
        }

        else if (ch == 4) {
            printf("Current Text: %s\n", text);
        }

        else if (ch == 5) {
            return 0;
        }

        else {
            printf("Invalid choice!\n");
        }
    }
}
